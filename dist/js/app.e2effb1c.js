(function(t){function e(e){for(var o,a,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)a=s[d],i[a]&&p.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"25df":function(t,e,n){"use strict";var o=n("bb93"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("v-app",[n("Toolbar"),n("v-content",[n("router-view")],1)],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{permanent:"",dark:"",floating:"","fill-height":"",app:""}},[n("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[n("v-list",{staticClass:"pa-0"},[n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-avatar",[n("img",{attrs:{src:"https://randomuser.me/api/portraits/men/85.jpg"}})]),n("v-list-tile-content",[n("v-list-tile-title",[t._v("John Leider")])],1)],1)],1)],1),n("v-divider"),n("FolderNavigation"),n("v-divider"),n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[t.isLoggedIn?t._e():n("v-list-tile",[n("v-list-tile-action",[n("v-icon",[t._v("person")])],1),n("v-list-tile-content",[n("v-list-tile-title",[t.isLoggedIn?t._e():n("router-link",{attrs:{to:"login"}},[t._v("Login")])],1)],1)],1),t.isLoggedIn?n("v-list-tile",[n("v-list-tile-action",[n("v-icon",[t._v("person_outline")])],1),n("v-list-tile-content",[n("v-list-tile-title",[n("a",{on:{click:t.logout}},[t._v("Logout")])])],1)],1):t._e()],1)],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[t.parentPath?n("v-list-tile",[n("v-list-tile-action",[n("v-icon",[t._v("arrow_back")])],1),n("v-list-tile-content",[n("v-list-tile-title",[n("router-link",{attrs:{to:{path:t.parentPath}}},[t._v("Parent Item")])],1)],1)],1):t._e(),t._l(t.context.items,function(e){return n("v-list-tile",{key:e.UUID},[n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-tile-content",[n("v-list-tile-title",[n("router-link",{attrs:{to:{path:t.makePath(e["@id"])}}},[t._v("\n          "+t._s(e.title)+"\n        ")])],1)],1)],1)})],2)},c=[],l=(n("28a5"),n("a481"),n("d225")),u=function t(e){var n=e.title,o=e.text,i=e.experts_assigned;Object(l["a"])(this,t),this.title=n,this.text=o,this.experts_assigned=i},d=function t(e){var n=e.title,o=e.description,i=e.text,r=e.client,a=e.coordinators,s=e.expert_pool;Object(l["a"])(this,t),this.title=n,this.description=o,this.text=i,this.client=r,this.coordinators=a,this.expert_pool=s},p={baseURI:"http://plone:8080/Plone",basePath:"/Plone",ContributionModel:u,CaseModel:d},v={makePath:function(t){return t.replace(p.baseURI,"").replace(p.basePath,"")},makeURL:function(t){return p.baseURI+t.replace(p.basePath,"")}},_={computed:{context:function(){return this.$store.state.context.current_context},parentPath:function(){var t=this.$route.path.split("/");return"/"===this.$route.path||t.length<2?null:(t.splice(-1,1),t.join("/")||"/")}},methods:{makePath:function(t){return v.makePath(t)}}},h=_,f=n("2877"),m=Object(f["a"])(h,s,c,!1,null,null,null);m.options.__file="foldernavigation.vue";var x=m.exports,g={components:{FolderNavigation:x},computed:{isLoggedIn:function(){return this.$store.getters["login/isLoggedIn"]}},methods:{logout:function(){var t=this;this.$store.dispatch("login/LOGOUT").then(function(){t.$router.push("/login")})}}},b=g,T=Object(f["a"])(b,r,a,!1,null,null,null);T.options.__file="toolbar.vue";var E=T.exports,k={name:"app",components:{Toolbar:E}},w=k,O=Object(f["a"])(w,o,i,!1,null,null,null);O.options.__file="App.vue";var C=O.exports,A=n("2b0e"),y=n("8c4f"),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{staticClass:"login",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("h1",[t._v("Sign in")]),n("label",[t._v("User Name")]),n("v-text-field",{attrs:{required:"",placeholder:"User name"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("label",[t._v("Password")]),n("v-text-field",{attrs:{required:"",type:"password",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-btn",{on:{click:t.login}},[t._v("Login")])],1)},R=[],L={data:function(){return{username:"",password:""}},methods:{login:function(){var t=this,e=this.username,n=this.password;this.$store.dispatch("login/LOGIN",{username:e,password:n}).then(function(){return t.$router.push("/")}).catch(function(t){return console.log(t)})}}},P=L,$=Object(f["a"])(P,D,R,!1,null,null,null);$.options.__file="LoginView.vue";var S=$.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view",class:[t.component]},[t.context?n(t.component,{tag:"component",attrs:{context:t.context}}):t._e()],1)},j=[],N=n("a4bb"),H=n.n(N),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"viewWrapper"},[n("v-tabs",{attrs:{color:"cyan",dark:"","slider-color":"yellow"}},[n("v-tab",{attrs:{ripple:""}},[t._v("\n      Analyse\n    ")]),n("v-tab-item",[n("Thread",{attrs:{context:t.context}})],1),n("v-tab",{attrs:{ripple:""}},[t._v("\n      Strategien\n    ")]),n("v-tab-item",[t._v("\n      Strategien\n    ")]),n("v-tab",{attrs:{ripple:""}},[t._v("\n      Aktionsplan\n    ")]),n("v-tab-item",[t._v("\n      Evaluierung\n    ")]),n("v-tab",{attrs:{ripple:""}},[t._v("\n      Evaluierung\n    ")]),n("v-tab-item",[t._v("\n      Evaluierung\n    ")])],1)],1)},X=[],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.tree.start_path?n("ThreadRecurse",{attrs:{contexttree:t.contexttree,path:t.tree.start_path,tree:t.tree}}):t._e()},Y=[],M=n("cebc"),W=n("2f62"),F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.items,function(e){return n("div",{key:e["@id"],staticClass:"article_wrapper"},[n("Contribution",{attrs:{contexttree:t.contexttree,item:e}}),n("ThreadRecurse",{attrs:{contexttree:t.contexttree,path:t.newPath(e),tree:t.tree}})],1)}),0)},G=[],J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("intersect",{on:{enter:t.load}},[n("v-card",{class:["uid-"+t.item.UID,"state-"+t.item.review_state]},[n("v-card-title",[n("h3",[t.context?n("TextLine",{attrs:{label:"Title",edit:t.edit},model:{value:t.context.title,callback:function(e){t.$set(t.context,"title",e)},expression:"context.title"}}):t._e()],1),t.context?n("ul",[n("li",[n("strong",[t._v("Autor*in:")]),n("span",[t._v(t._s(t.context.creator))])]),n("li",[n("strong",[t._v("Erstellt:")]),n("time",{attrs:{datetime:t.context.created}},[t._v(t._s(t.context.created))])]),t.context.modified?n("li",[n("strong",[t._v("Verändert:")]),n("time",{attrs:{datetime:t.context.modified}},[t._v(t._s(t.context.modified))])]):t._e()]):t._e()]),t.context&&t.context.text?n("TextArea",{attrs:{label:"Text",edit:t.edit},model:{value:t.context.text.data,callback:function(e){t.$set(t.context.text,"data",e)},expression:"context.text.data"}}):t._e(),n("footer",[t.context?n("ul",[t.context.workspace?n("li",[n("strong",[t._v("Workspace:")]),n("span",[t._v(t._s(t.context.workspace))])]):t._e(),t.context.client?n("li",[n("strong",[t._v("Klient*in:")]),n("span",[t._v(t._s(t.context.client))])]):t._e(),t.context.coordinators?n("li",[n("strong",[t._v("Koordinator*in:")]),n("span",[t._v(t._s(t.context.coordinators))])]):t._e(),t.context.expert_pool?n("li",[n("strong",[t._v("Expert*innen Pool:")]),n("span",[t._v(t._s(t.context.expert_pool))])]):t._e(),t.context.experts_assigned?n("li",[n("strong",[t._v("Zugewiesene Expert*innen:")]),n("span",[t._v(t._s(t.context.experts_assigned))])]):t._e(),n("li",[n("strong",[t._v("URL:")]),n("router-link",{attrs:{to:{path:t.makePath(t.item["@id"])}}},[t._v(t._s(t.item.title))])],1),t.item.previous_workspace?n("li",[n("strong",[t._v("Zum vorherigen Workspace:")]),n("router-link",{attrs:{to:{path:t.makePath(t.item.previous_workspace.path)}}},[t._v(t._s(t.item.previous_workspace.title))])],1):t._e(),t.item.next_workspaces.length?n("li",[n("strong",[t._v("Zum nächsten Workspace:")]),n("ul",t._l(t.item.next_workspaces,function(e){return n("li",{key:e.path},[n("router-link",{attrs:{to:{path:t.makePath(e.path)}}},[t._v(t._s(e.title))])],1)}),0)]):t._e()]):t._e(),n("v-card-actions",[t.editable?n("div",[t.edit?n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"red",title:"Cancel"},on:{click:t.cancel}},[n("v-icon",{attrs:{dark:""}},[t._v("cancel")])],1):t._e(),t.edit?n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"green",title:"Save"},on:{click:t.save}},[n("v-icon",{attrs:{dark:""}},[t._v("save")])],1):t._e(),t.edit?t._e():n("v-btn",{class:{editing:t.edit},attrs:{fab:"",dark:"",small:"",color:"cyan",title:"Edit"},on:{click:t.toggle_edit}},[n("v-icon",{attrs:{dark:""}},[t._v("edit")])],1)],1):t._e()])],1)],1)],1)},B=[],q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.schema?n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-text",[n("FormSchema",{attrs:{schema:t.schema},on:{submit:t.save},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),n("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)],1)],1)],1):t._e()},Z=[],K=n("f499"),Q=n.n(K),z=n("8a56"),tt=n.n(z),et={components:{FormSchema:tt.a},props:["context"],data:function(){return{dialog:!0,model:JSON.parse(Q()(this.context)),schema_props:{Contribution:["title","text","experts_assigned"],Case:["title","description","text","client","coordinators","expert_pool"]}}},computed:{schema:function(){var t=this.$store.getters["types/types"][this.context["@type"]],e=!1;if(!t||!t.schema)return!1;e=JSON.parse(Q()(t.schema));for(var n={},o=this.schema_props[this.context["@type"]],i=0;i<o.length;i++){var r=o[i];r in e.properties&&(n[r]=e.properties[r])}return e.properties=n,e}},methods:{makePath:function(t){return v.makePath(t)},load:function(){this.$store.dispatch("types/LOAD_TYPE",{url:this.context["@id"],type:this.context["@type"]})},save:function(){this.$store.dispatch("context/PATCH",{url:this.context["@id"],model:this.model}),this.dialog=!1}},created:function(){this.load()},watch:{context:"load"}},nt=et,ot=Object(f["a"])(nt,q,Z,!1,null,null,null);ot.options.__file="contribution_edit.vue";var it=ot.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.edit?n("v-text-field",{attrs:{label:t.label},model:{value:t._value,callback:function(e){t._value=e},expression:"_value"}}):t._e(),t.edit?t._e():n("span",[t._v(t._s(t.value))])],1)},at=[],st={props:{edit:Boolean,label:String,value:String},computed:{_value:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},ct=st,lt=Object(f["a"])(ct,rt,at,!1,null,null,null);lt.options.__file="TextLine.vue";var ut=lt.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.edit?n("TextEditor",{attrs:{text:t._value,options:t.editor_options,"custom-tag":"div"},on:{edit:t.editor_edit}}):t._e(),t.edit?t._e():n("div",{domProps:{innerHTML:t._s(t.value)}})],1)},pt=[],vt=n("4884"),_t=n.n(vt),ht=(n("3e93"),n("75b0"),{components:{TextEditor:_t.a},props:{edit:Boolean,label:String,value:String},data:function(){return{editor_options:{toolbar:{buttons:["bold","italic","underline","anchor"]},anchor:{customClassOption:"alink",customClassOptionText:"Button",linkValidation:!1,targetCheckbox:!1,targetCheckboxText:"Open in new window"}}}},computed:{_value:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{editor_edit:function(t){this._value=t.api.origElements.innerHTML}}}),ft=ht,mt=Object(f["a"])(ft,dt,pt,!1,null,null,null);mt.options.__file="TextArea.vue";var xt=mt.exports,gt=n("760e"),bt={components:{ContributionEdit:it,Intersect:gt["a"],TextLine:ut,TextArea:xt},props:["contexttree","item"],data:function(){return{edit:!1}},computed:{context:function(){return this.contexttree[this.item["@id"]]},editable:function(){return this.context&&this.context.can_edit}},methods:{makePath:function(t){return v.makePath(t)},load:function(){this.context||this.$store.dispatch("context/LOAD_CONTEXT",{url:this.item["@id"]})},toggle_edit:function(){this.edit=!this.edit,console.log(this.edit?"editing":"not editing")},cancel:function(){this.edit=!1,this.$store.dispatch("context/LOAD_CONTEXT",{url:this.item["@id"],force:!0})},save:function(){this.$store.dispatch("context/PATCH",{context:this.context}),this.edit=!1}}},Tt=bt,Et=Object(f["a"])(Tt,J,B,!1,null,null,null);Et.options.__file="contribution.vue";var kt=Et.exports,wt={name:"ThreadRecurse",components:{Contribution:kt,ThreadRecurse:At},props:["contexttree","path","tree"],computed:{items:function(){return this.tree.items[this.path]}},methods:{newPath:function(t){var e=t["@id"].split("/").splice(-1),n=this.path+"/"+e[0];return n}}},Ot=wt,Ct=(n("25df"),Object(f["a"])(Ot,F,G,!1,null,null,null));Ct.options.__file="thread_recurse.vue";var At=Ct.exports,yt={components:{ThreadRecurse:At},props:["context"],computed:Object(M["a"])({tree:function(){return this.$store.state.context.current_thread}},Object(W["b"])({contexttree:"context/contexttree"})),methods:{load:function(){this.$store.dispatch("context/LOAD_THREAD",{url:this.context["@components"]["thread"]["@id"]})}},mounted:function(){this.load()},watch:{context:"load"}},Dt=yt,Rt=Object(f["a"])(Dt,V,Y,!1,null,null,null);Rt.options.__file="thread.vue";var Lt=Rt.exports,Pt={components:{Thread:Lt},props:["context"]},$t=Pt,St=Object(f["a"])($t,I,X,!1,null,null,null);St.options.__file="ContributionView.vue";var Ut=St.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"viewWrapper"},[n("h1",[t._v(t._s(t.context.title))])])},Nt=[],Ht={props:["context"]},It=Ht,Xt=Object(f["a"])(It,jt,Nt,!1,null,null,null);Xt.options.__file="DefaultView.vue";var Vt=Xt.exports,Yt={components:{ContributionView:Ut,DefaultView:Vt},computed:{context:function(){return this.$store.state.context.current_context},component:function(){if(this.context){var t=this.context["@type"];return"Case"===t&&(t="Contribution"),-1===H()(this.$options.components).indexOf(t+"View")&&(t="Default"),t+"View"}}},methods:{load:function(){this.$store.dispatch("context/LOAD_CONTEXT",{path:this.$route.path,set_current:!0})}},created:function(){this.load()},watch:{$route:"load"}},Mt=Yt,Wt=Object(f["a"])(Mt,U,j,!1,null,null,null);Wt.options.__file="ViewFactory.vue";var Ft=Wt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"viewWrapper"},[t.context["@components"]?n("Thread",{attrs:{context:t.context}}):t._e()],1)},Jt=[],Bt={components:{Thread:Lt},computed:{context:function(){return this.$store.state.context.current_context}},methods:{load:function(){var t=this.$route.path.split("+ws")[0];this.$store.dispatch("context/LOAD_CONTEXT",{path:t,workspace:this.$route.params.id,set_current:!0})}},created:function(){this.load()},watch:{$route:"load"}},qt=Bt,Zt=Object(f["a"])(qt,Gt,Jt,!1,null,null,null);Zt.options.__file="WorkspaceView.vue";var Kt=Zt.exports;A["default"].use(y["a"]);var Qt=new y["a"]({mode:"history",routes:[{path:"/login",name:"login",component:S},{path:"**/+ws/:id",name:"ws-view",component:Kt},{path:"**",name:"view-factory",component:Ft}]}),zt=n("795b"),te=n.n(zt),ee=n("bc3a"),ne=n.n(ee),oe={namespaced:!0,state:{auth_status:"",auth_token:localStorage.getItem("auth_token")||void 0},getters:{isLoggedIn:function(t){return!!t.auth_token}},actions:{LOGIN:function(t,e){var n=t.commit,o=e.username,i=e.password;return new te.a(function(t,e){n("AUTH_REQUEST"),ne.a.post(p.baseURI+"/@login",{login:o,password:i}).then(function(e){var o=e.data.token;o?(localStorage.setItem("auth_token",o),n("AUTH_SUCCESS",o)):n("AUTH_ERROR"),t(e)}).catch(function(t){localStorage.removeItem("auth_token"),n("AUTH_ERROR"),e(t)})})},LOGOUT:function(t){var e=t.commit;return new te.a(function(t,n){try{localStorage.removeItem("auth_token"),e("AUTH_LOGOUT"),t()}catch(o){n()}})}},mutations:{AUTH_REQUEST:function(t){t.auth_status="loading"},AUTH_SUCCESS:function(t,e){t.auth_status="success",t.auth_token=e},AUTH_ERROR:function(t){t.auth_status="error"},AUTH_LOGOUT:function(t){t.auth_status="",t.auth_token=void 0}}},ie=n("5d73"),re=n.n(ie),ae={namespaced:!0,state:{items:[],current_context:{"@components":{},"@id":"","@type":"",UID:"",_loaded:null,allow_discussion:!1,contributors:[],created:null,creators:[],experts_assigned:"",id:"",is_folderish:!0,items:"",items_total:0,layout:"",modified:null,parent:"",review_state:"",rights:"",text:"",title:"",version:"",workspace:""},current_thread:{"@id":"",items:[],start_path:""}},getters:{contexttree:function(t){var e={},n=!0,o=!1,i=void 0;try{for(var r,a=re()(t.items);!(n=(r=a.next()).done);n=!0){var s=r.value;e[s["@id"]]=s}}catch(c){o=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return e}},actions:{LOAD_CONTEXT:function(t,e){var n=t.commit,o=t.state,i=e.path,r=void 0===i?"":i,a=e.url,s=void 0===a?"":a,c=e.workspace,l=void 0===c?void 0:c,u=e.set_current,d=void 0!==u&&u,p=e.force,_=void 0!==p&&p;if(s=s||v.makeURL(r),s=l?"".concat(s,"?workspace=").concat(l):s,!_&&o.items[s])return console.log("ALREADY LOADED: ".concat(s)),void(d&&n("SET_CURRENT_CONTEXT",{context:o.items[s]}));ne.a.get(s).then(function(t){console.log("LOADED: ".concat(s));var e=t.data;e.items=e.items.map(function(t){switch(t["@type"]){case"Folder":t.icon="folder";break;case"Cases":t.icon="view_list";break;case"Case":t.icon="dashboard";break;case"Contribution":t.icon="comment";break;default:t.icon="chat_bubble"}return t}),n("ADD_CONTEXT",{context:e}),d&&n("SET_CURRENT_CONTEXT",{context:e})}).catch(function(t){console.log("Error while LOAD_CONTEXT for context: ".concat(s)),console.log(t)})},LOAD_THREAD:function(t,e){var n=t.commit,o=(t.state,e.url);n("CLEAR_CURRENT_THREAD"),ne.a.get(o).then(function(t){console.log("LOADED THREAD: ".concat(o)),n("SET_CURRENT_THREAD",{thread:t.data})}).catch(function(t){console.log("Error while LOAD_THREAD at: ".concat(o)),console.log(t)})},PATCH:function(t,e){var n=t.dispatch,o=(t.commit,t.state,e.url),i=void 0===o?null:o,r=e.context,a=void 0===r?null:r,s=e.model,c=void 0===s?null:s;if(a){i=a["@id"],c=JSON.parse(Q()(a));var l=new(p["".concat(a["@type"],"Model")])({});for(var u in c)u in l||delete c[u]}ne.a.patch(i,c).then(function(t){console.log("PATCH: ".concat(i)),n("LOAD_CONTEXT",{url:i,force:!0})}).catch(function(t){console.log("Error while PATCH for context: ".concat(i)),console.log(t)})}},mutations:{ADD_CONTEXT:function(t,e){var n=e.context,o=!1;n._loaded=new Date;for(var i=0;i<t.items.length;i++)if(t.items[i]["@id"]===n["@id"]){console.log("update"),t.items[i]=n,o=!0;break}o||(console.log("add"),t.items.push(n)),console.log("ADD_CONTEXT: ".concat(n["@id"]))},SET_CURRENT_CONTEXT:function(t,e){var n=e.context;t.current_context=n,console.log("SET_CURRENT_CONTEXT: "+n["@id"])},SET_CURRENT_THREAD:function(t,e){var n=e.thread;t.current_thread=n,console.log("SET_CURRENT_THREAD")},CLEAR_CURRENT_THREAD:function(t){t.current_thread={}}}},se={namespaced:!0,state:{types:[]},getters:{types:function(t){var e={},n=!0,o=!1,i=void 0;try{for(var r,a=re()(t.types);!(n=(r=a.next()).done);n=!0){var s=r.value;e[s["type"]]=s}}catch(c){o=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return e}},actions:{LOAD_TYPE:function(t,e){var n=t.commit,o=t.state,i=e.url,r=e.type,a=e.force,s=void 0!==a&&a;i="".concat(i,"/@types/").concat(r),s||!o.types[r]?ne.a.get(i).then(function(t){console.log("LOADED TYPE: ".concat(i)),n("ADD_TYPE",{type:r,schema:t.data})}).catch(function(t){console.log("Error while LOAD_TYPE ".concat(i)),console.log(t)}):console.log("ALREADY LOADED TYPE: ".concat(r))}},mutations:{ADD_TYPE:function(t,e){var n=e.type,o=e.schema;t.types.push({type:n,schema:o,_loaded:new Date}),console.log("ADD_TYPE ".concat(n))},CLEAR_TYPES:function(t){t.types=[]}}};A["default"].use(W["a"]);var ce=new W["a"].Store({modules:{login:oe,context:ae,types:se}});ne.a.defaults.headers.common["Accept"]="application/json",ne.a.interceptors.request.use(function(t){var e=localStorage.getItem("auth_token");return e&&(t.headers["Authorization"]="Bearer ".concat(e)),t},function(t){return te.a.reject(t)});var le=n("ce5b"),ue=n.n(le);n("5abe"),n("d1e7"),n("bf40");A["default"].config.productionTip=!1,A["default"].use(ue.a,{iconfont:"md"}),new A["default"]({router:Qt,store:ce,render:function(t){return t(C)}}).$mount("#app")},bb93:function(t,e,n){}});
//# sourceMappingURL=app.e2effb1c.js.map