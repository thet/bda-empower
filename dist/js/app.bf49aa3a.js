(function(e){function t(t){for(var r,i,c=t[0],s=t[1],l=t[2],p=0,d=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0906":function(e,t,n){},"0cba":function(e,t,n){"use strict";var r=n("cb8d"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d"),n("927c"),n("ac6a"),n("456d");var r=n("d225"),a=!1,o={add:"Add portal content",add_contribution:"bda.empower: Add Contribution",add_case:"bda.empower: Add Case",modify:"Modify portal content",modify_client:"bda.empower: Modify Client",modify_expert_pool:"bda.empower: Modify Expert Pool",modify_coordinators:"bda.empower: Modify Coordinators",modify_experts_assigned:"bda.empower: Modify Experts Assigned",modify_workspace_type:"bda.empower: Modify Workspace Type",delete:"Delete objects"},i=function e(t){var n=t.components_,a=void 0===n?{}:n,o=t.id_,i=void 0===o?"":o,c=t.type_,s=void 0===c?"":c,l=(t.UID,t._loaded),u=void 0===l?null:l,p=t.allow_discussion,d=void 0!==p&&p,f=t.contributors,v=void 0===f?[]:f,_=t.created,m=void 0===_?null:_,h=t.creators,b=void 0===h?[]:h,g=t.experts_assigned,x=void 0===g?"":g,w=t.id,y=void 0===w?"":w;t.is_folderish,t.items,t.items_total,t.layout,t.modified,t.review_state,t.rights,t.text,t.title,t.version,t.workspace;Object(r["a"])(this,e),this["@components"]=a,this["@id"]=i,this["@type"]=s,this._loaded=u,this.allow_discussion=d,this.contributors=v,this.created=m,this.creators=b,this.experts_assigned=x,this.id=y,this.is_folderish=!0,this.items="",this.items_total=0,this.layout="",this.modified=null,this.review_state="",this.rights="",this.text="",this.title="",this.version="",this.workspace=""},c=function e(t){var n=t.title,a=void 0===n?"":n,o=t.text,i=void 0===o?{data:""}:o,c=t.experts_assigned,s=void 0===c?[]:c,l=t.workspace,u=void 0===l?"":l;Object(r["a"])(this,e),this["@type"]="Contribution",this.title=a,this.text=i,this.experts_assigned=s,this.workspace=u},s=function e(t){var n=t.title,a=void 0===n?"":n,o=t.description,i=void 0===o?"":o,c=t.text,s=void 0===c?{data:""}:c,l=t.client,u=void 0===l?[]:l,p=t.coordinators,d=void 0===p?[]:p,f=t.expert_pool,v=void 0===f?[]:f,_=t.workspace,m=void 0===_?"case":_;Object(r["a"])(this,e),this["@type"]="Case",this.title=a,this.description=i,this.text=s,this.client=u,this.coordinators=d,this.expert_pool=v,this.workspace=m},l={DEVELOPMENT:a,PERMISSION_MAP:o,baseURI:"http://localhost:8080/p",basePath:"/p",GenericContextModel:i,ContributionModel:c,CaseModel:s,inline_types:["Image","File"],portal_messages:{LOGIN_ERROR_TITLE:"Login Error",LOGIN_ERROR_TEXT:"Could not login"}},u=n("2b0e");function p(e,t){var n=document.createComment(" ");Object.defineProperty(n,"setAttribute",{value:function(){}}),t.text=" ",t.elm=n,t.isComment=!0,t.tag=void 0,t.data.directives=void 0,t.componentInstance&&(t.componentInstance.$el=n),e.parentNode&&e.parentNode.replaceChild(n,e)}function d(e,t,n){var r,a;if(!Object.keys(t.arg).length)throw'v-can needs an argument and context like ``v-can:edit="object"``';var o=l.PERMISSION_MAP[t.arg],i=(null===(r=t.value)||void 0===r?void 0:null===(a=r.permissions)||void 0===a?void 0:a[o])||!1;i||p(e,n)}u["a"].directive("can",d),u["a"].directive("focus",{inserted:function(e){e.focus()}});n("5abe");var f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{key:"app_refresh_key",attrs:{id:"app"}},[n("Toolbar"),n("v-content",[n("LoginButton"),n("PortalMessage"),n("router-view")],1)],1)},v=[],_=(n("8e6e"),n("28a5"),n("96cf"),n("3b8d")),m=n("bd86"),h=n("2f62"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.messages,function(t,r){return n("section",{key:"portal_message-"+r,staticClass:"portal-message",class:"message_type"},[n("header",{staticClass:"portal-message-header"},[e._v("\n    "+e._s(t.title)+"\n  ")]),n("div",{staticClass:"portal-message-content"},[e._v("\n    "+e._s(t.text)+"\n  ")])])}),0)},g=[];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y={computed:w({},Object(h["b"])({messages:function(e){return e.portal_message.messages}}))},E=y,O=n("2877"),k=Object(O["a"])(E,b,g,!1,null,null,null),T=k.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{permanent:"",dark:"",floating:"","fill-height":"",app:""}},[n("AccountInfo"),n("v-divider"),n("FolderNavigation"),n("v-divider")],1)},j=[],R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user.fullname?n("div",{staticClass:"em-account-info"},[n("strong",[e._v(e._s(e.user.fullname))]),e.description?n("p",[e._v(e._s(e.description))]):e._e(),e.roles?n("p",[e._v(e._s(e.roles))]):e._e()]):e._e()},C=[];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P={computed:D({description:function(){return[this.user.description,this.user.email].map(function(e){return e}).join(", ")},roles:function(){return this.user.roles.join(", ")}},Object(h["b"])({user:function(e){return e.login.user}}))},L=P,$=Object(O["a"])(L,R,C,!1,null,null,null),U=$.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[e.parentPath?n("v-list-item",[n("v-list-item-action",[n("v-icon",[e._v(e._s(e.icon_back))])],1),n("v-list-item-content",[n("v-list-item-title",[n("router-link",{attrs:{to:{path:e.parentPath}}},[e._v("Parent Item")])],1)],1)],1):e._e(),e._l(e.context.items,function(t){return n("v-list-item",{key:t.UUID},[n("v-list-item-action",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[n("router-link",{attrs:{to:{path:e.makePath(t["@id"])}}},[e._v("\n          "+e._s(t.title)+"\n        ")])],1)],1)],1)})],2)},N=[],M=n("94ed"),q=(n("6762"),n("2fdb"),n("6b54"),n("aef6"),n("a481"),{timeout:function(e){return new Promise(function(t){return setTimeout(t,e)})},cleanURL:function(e){return e.split("?")[0].split("+")[0].split("#")[0].split("&")[0]},makePath:function(e){var t=e.replace(l.baseURI,"").replace(l.basePath,"");return t.endsWith("/")&&(t=t.slice(0,-1)),t},makeURL:function(e){return l.baseURI+e.replace(l.basePath,"")},parentURL:function(e){var t=e.split("/");return t.pop(),t.join("/")},zeropad:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toString();while(n.length<t)n="0".concat(n);return n},getattr:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return e[t]}catch(r){return n}},items_from_vocab:function(e){return e.items.map(function(e){return{text:e.title,value:e.token}})},image_or_file:function(e){return e.type.toLowerCase().indexOf("image")>-1?"image":"file"},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},is_inline_type:function(e){return l.inline_types.includes(e["@type"])},logger:{log:function(e){u["a"].config.silent||console.log(e)},debug:function(e){u["a"].config.silent||console.debug(e)},warn:function(e){u["a"].config.silent||console.warn(e)},error:function(e){u["a"].config.silent||console.error(e)}}});function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W,B,G={data:function(){return{icon_back:M["c"]}},computed:F({parentPath:function(){var e=this.$route.path.split("/");return"/"===this.$route.path||e.length<2?null:(e.splice(-1,1),e.join("/")||"/")}},Object(h["b"])({context:function(e){return e.context.current_context}})),methods:{makePath:function(e){return q.makePath(e)}}},H=G,X=Object(O["a"])(H,I,N,!1,null,null,null),z=X.exports,Y={components:{AccountInfo:U,FolderNavigation:z}},J=Y,K=Object(O["a"])(J,S,j,!1,null,null,null),Q=K.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-list",{staticClass:"pt-0",attrs:{dense:""}},[e.isLoggedIn?e._e():n("v-list-item",[n("v-list-item-action",[n("v-icon",[e._v(e._s(e.icon_account))])],1),n("v-list-item-content",[n("v-list-item-title",[n("button",{staticClass:"btn btn-link",on:{click:function(t){e.do_login=!0}}},[e._v("Login")])])],1)],1),e.isLoggedIn?n("v-list-item",[n("v-list-item-action",[n("v-icon",[e._v(e._s(e.icon_account_outline))])],1),n("v-list-item-content",[n("v-list-item-title",[n("button",{staticClass:"btn btn-link",on:{click:e.logout}},[e._v("Logout")])])],1)],1):e._e()],1),e.do_login?n("ModalWrapper",[n("LoginForm",{on:{logged_out:e.close_modal,logged_in:e.close_modal}})],1):e._e()],1)},ee=[],te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{staticClass:"login",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("v-card",[n("v-card-title",[e._v(e._s(e.$t("login.title")))]),n("v-card-text",[n("v-text-field",{attrs:{required:"",label:e.$t("login.username"),placeholder:e.$t("login.username_placeholder")},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{required:"",label:e.$t("login.password"),type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"green",type:"submit"},on:{click:function(t){return t.stopPropagation(),e.login(t)}}},[e._v("\n        Login\n      ")])],1)],1)],1)},ne=[],re={data:function(){return{username:"",password:""}},methods:{login:function(){var e=this,t=this.username,n=this.password;this.$store.dispatch("login/LOGIN",{username:t,password:n}).then(function(){e.$bubble("logged_in"),e.$router.push("/cases").catch(function(){})}).catch(function(t){var n=l.portal_messages.LOGIN_ERROR_TITLE,r=l.portal_messages.LOGIN_ERROR_TEXT;try{n=t.response.data.error.type||"".concat(t.response.status," - ").concat(t.response.statusText),r=t.response.data.error.message}catch(a){n="".concat(t.response.status," - ").concat(t.response.statusText)}e.$bubble("login_error"),e.$store.commit("portal_message/ADD_MESSAGE",{title:n,text:r,type:"error"}),q.logger.error(t)})}}},ae=re,oe=Object(O["a"])(ae,te,ne,!1,null,null,null),ie=oe.exports,ce={name:"modalwrapper",props:{active:{type:Boolean,default:!0}},render:function(e){var t=this.$slots.default;return this.active&&(t=e("div",{class:"modal"},t)),t}},se=ce,le=Object(O["a"])(se,W,B,!1,null,null,null),ue=le.exports,pe={components:{LoginForm:ie,ModalWrapper:ue},data:function(){return{icon_account:M["a"],icon_account_outline:M["b"],do_login:!1}},computed:{isLoggedIn:function(){return this.$store.getters["login/isLoggedIn"]}},methods:{close_modal:function(){this.do_login=!1},logout:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.do_login=!1,e.next=3,this.$store.dispatch("login/LOGOUT");case 3:this.$router.push({name:"home"}).catch(function(){});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},de=pe,fe=Object(O["a"])(de,Z,ee,!1,null,null,null),ve=fe.exports;function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var he={name:"app",components:{PortalMessage:T,Toolbar:Q,LoginButton:ve},computed:me({},Object(h["b"])({app_refresh_key:function(e){return e.app_refresh_key}})),methods:{load:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.$route.path.split("+")[0].split("?")[0].split("&")[0],this.$store.dispatch("context/LOAD_CONTEXT",{path:t,set_current:!0});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.load()},watch:{$route:"load",app_refresh_key:"load"}},be=he,ge=Object(O["a"])(be,f,v,!1,null,null,null),xe=ge.exports,we=n("bc3a"),ye=n.n(we);function Ee(){return{app_refresh_key:Date.now()}}var Oe={namespaced:!0,state:Ee(),actions:{RESET_STATE:function(e){var t=e.commit;t("RESET_STATE")}},mutations:{RESET_STATE:function(e){Object.assign(e,Ee())}}},ke=(n("7f7f"),n("ac4d"),n("8a81"),n("6ee6")),Te=n("4328"),Se=n.n(Te);function je(){return{items:{},current_context:new l.GenericContextModel({}),current_case:new l.GenericContextModel({})}}var Re={namespaced:!0,state:je(),actions:{LOAD_CONTEXT:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,o,i,c,s,l,u,p,d,f,v,_,m,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,a=t.commit,o=t.state,i=n.path,c=void 0===i?"":i,s=n.url,l=void 0===s?"":s,u=n.set_current,p=void 0!==u&&u,d=n.set_case,f=void 0!==d&&d,v=n.force,_=void 0!==v&&v,l=l||q.makeURL(c),c=c||q.makePath(l),m=null,_||!o.items[c]){e.next=11;break}return q.logger.debug("LOAD_CONTEXT - using cache: ".concat(c)),m=o.items[c],p&&(a("SET_CURRENT_CONTEXT",{context:m}),r("LOAD_CONTEXT",{url:m.current_case,set_case:!0})),f&&a("SET_CURRENT_CASE",{context:m}),e.abrupt("return",m);case 11:return e.prev=11,q.logger.debug("LOAD_CONTEXT: ".concat(l)),e.next=15,ye.a.get(l,{params:{metadata_fields:["workspace","workspace_root","UID","created","modified"]},paramsSerializer:function(e){return Se.a.stringify(e,{arrayFormat:"repeat"})}});case 15:h=e.sent,m=h.data,m.workspace=q.getattr(m.workspace,"token",""),m.items=m.items.map(function(e){switch(e["@type"]){case"Folder":e.icon=M["h"];break;case"Cases":e.icon=M["n"];break;case"Case":e.icon=M["m"];break;case"Contribution":e.icon=M["f"];break;default:e.icon=M["i"]}return e}),m["@id"]=q.cleanURL(m["@id"]),a("ADD_CONTEXT",{context:m}),p&&(a("SET_CURRENT_CONTEXT",{context:m}),r("LOAD_CONTEXT",{url:m.current_case,set_case:!0})),f&&a("SET_CURRENT_CASE",{context:m}),e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](11),q.logger.error("Error while LOAD_CONTEXT for: ".concat(l)),q.logger.error(e.t0);case 29:return e.abrupt("return",m);case 30:case"end":return e.stop()}},e,null,[[11,25]])}));function t(t,n){return e.apply(this,arguments)}return t}(),PATCH:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,o,i,c,s,u,p,d,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(Object(ke["a"])(t),r=n.url,a=void 0===r?null:r,o=n.context,i=void 0===o?null:o,c=n.model,s=void 0===c?null:c,i)for(d in a=i["@id"],s=JSON.parse(JSON.stringify(i)),p=new(l["".concat(i["@type"],"Model")])({}),s)d in p||delete s[d];return e.prev=3,q.logger.debug("PATCH: ".concat(a)),e.next=7,ye.a.patch(a,s);case 7:f=e.sent,u=f.data,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](3),q.logger.error("Error while PATCH for context: ".concat(a)),q.logger.error(e.t0);case 15:return e.abrupt("return",u);case 16:case"end":return e.stop()}},e,null,[[3,11]])}));function t(t,n){return e.apply(this,arguments)}return t}(),POST:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,o,i,c,s,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(s in Object(ke["a"])(t),r=n.parent_url,a=n.context,i=JSON.parse(JSON.stringify(a)),c=new(l["".concat(a["@type"],"Model")])({}),i)s in c||delete i[s];return e.prev=5,q.logger.debug("POST at: ".concat(r)),e.next=9,ye.a.post(r,i);case 9:u=e.sent,o=u.data,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](5),q.logger.error("Error while POST at context: ".concat(r)),q.logger.error(e.t0);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}},e,null,[[5,13]])}));function t(t,n){return e.apply(this,arguments)}return t}(),DELETE:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return Object(ke["a"])(t),r=n.context,a=r["@id"],o=null,e.prev=4,q.logger.debug("DELETE at: ".concat(a)),e.next=8,ye.a.delete(a);case 8:i=e.sent,o=i.data,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](4),q.logger.error("Error while DELETE at context: ".concat(a)),q.logger.error(e.t0);case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}},e,null,[[4,12]])}));function t(t,n){return e.apply(this,arguments)}return t}(),LOAD_FILES:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return Object(ke["a"])(t),r=n.url,e.prev=2,e.next=5,ye.a.get(r);case 5:return a=e.sent,e.abrupt("return",a.data.items.filter(function(e){return"Image"===e["@type"]||"File"===e["@type"]}));case 9:e.prev=9,e.t0=e["catch"](2),q.logger.error("Error while LOAD_FILES for: ".concat(r)),q.logger.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,9]])}));function t(t,n){return e.apply(this,arguments)}return t}(),SAVE_FILES:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,o,i,c,s,l,u,p,d,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:Object(ke["a"])(t),r=n.url,a=n.files,e.prev=2,q.logger.debug("SAVE_FILES at: ".concat(r)),o=!0,i=!1,c=void 0,e.prev=7,s=a[Symbol.iterator]();case 9:if(o=(l=s.next()).done){e.next=20;break}return u=l.value,p=q.image_or_file(u.file),d={data:u.src.split(",")[1],encoding:"base64",filename:u.file.name,"content-type":u.file.type},f={title:u.file.name,"@type":q.capitalize(p)},f[p]=d,e.next=17,ye.a.post(r,f);case 17:o=!0,e.next=9;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](7),i=!0,c=e.t0;case 26:e.prev=26,e.prev=27,o||null==s.return||s.return();case 29:if(e.prev=29,!i){e.next=32;break}throw c;case 32:return e.finish(29);case 33:return e.finish(26);case 34:e.next=40;break;case 36:e.prev=36,e.t1=e["catch"](2),q.logger.error("Error while SAVE_FILES at: ".concat(r)),q.logger.error(e.t1);case 40:case"end":return e.stop()}},e,null,[[2,36],[7,22,26,34],[27,,29,33]])}));function t(t,n){return e.apply(this,arguments)}return t}(),DELETE_FILE:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return Object(ke["a"])(t),r=n.url,e.prev=2,q.logger.debug("DELETE_FILE at: ".concat(r)),e.next=6,ye.a.delete(r);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](2),q.logger.error("Error while DELETE_FILE at: ".concat(r)),q.logger.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));function t(t,n){return e.apply(this,arguments)}return t}(),RESET_STATE:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("RESET_STATE");case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},mutations:{RESET_STATE:function(e){Object.assign(e,je())},ADD_CONTEXT:function(e,t){var n=t.context;n._loaded=new Date,u["a"].set(e.items,q.makePath(n["@id"]),n),q.logger.debug("ADD_CONTEXT: ".concat(n["@id"]))},SET_CURRENT_CONTEXT:function(e,t){var n=t.context;e.current_context=n,q.logger.debug("SET_CURRENT_CONTEXT: ".concat(n["@id"]))},SET_CURRENT_CASE:function(e,t){var n=t.context;e.current_case=n,q.logger.debug("SET_CURRENT_CASE: ".concat(n["@id"]))}}};function Ce(){return{auth_status:"",auth_token:void 0,user:{}}}var Ae={namespaced:!0,state:Ce(),getters:{isLoggedIn:function(e){return!!e.auth_token}},actions:{LOGIN:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,o,i,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.username,o=n.password,r("AUTH_REQUEST"),e.prev=3,q.logger.debug("LOGIN ".concat(a)),e.next=7,ye.a.post(l.baseURI+"/@login",{login:a,password:o});case 7:if(i=e.sent,c=i.data.token,c){e.next=11;break}throw"Could not log in.";case 11:return r("AUTH_SUCCESS",c),e.next=14,ye.a.get("".concat(l.baseURI,"/@userinfo"));case 14:s=e.sent,r("SET_CURRENT_USER",s.data),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](3),r("AUTH_ERROR");case 21:case"end":return e.stop()}},e,null,[[3,18]])}));function t(t,n){return e.apply(this,arguments)}return t}(),LOGIN_RENEW:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,n("AUTH_REQUEST"),e.prev=2,q.logger.debug("LOGIN_RENEW"),e.next=6,ye.a.post(l.baseURI+"/@login-renew");case 6:if(r=e.sent,a=r.data.token,a){e.next=10;break}throw"Could not renew log in.";case 10:n("AUTH_SUCCESS",a),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),n("AUTH_ERROR");case 16:case"end":return e.stop()}},e,null,[[2,13]])}));function t(t){return e.apply(this,arguments)}return t}(),LOGOUT:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,a=t.commit,o=t.state,q.logger.debug("LOGOUT ".concat(null===o||void 0===o?void 0:null===(n=o.user)||void 0===n?void 0:n.username)),a("RESET_STATE"),e.next=5,r("context/RESET_STATE",{},{root:!0});case 5:return e.next=7,r("portal_message/RESET_STATE",{},{root:!0});case 7:return e.next=9,r("users/RESET_STATE",{},{root:!0});case 9:return e.next=11,r("app/RESET_STATE",{},{root:!0});case 11:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),RESET_STATE:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("RESET_STATE");case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},mutations:{RESET_STATE:function(e){q.logger.debug("RESET_STATE"),Object.assign(e,Ce())},AUTH_REQUEST:function(e){e.auth_status="loading"},AUTH_SUCCESS:function(e,t){e.auth_status="success",e.auth_token=t,sessionStorage.setItem("auth_token",t)},AUTH_ERROR:function(e){e.auth_status="error",e.auth_token=void 0,sessionStorage.removeItem("auth_token")},AUTH_LOGOUT:function(e){e.auth_status="",e.auth_token=void 0,e.user={},sessionStorage.removeItem("auth_token")},SET_CURRENT_USER:function(e,t){e.user=t}}};function De(){return{messages:[]}}var Pe={namespaced:!0,state:De(),actions:{RESET_STATE:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("RESET_STATE");case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},mutations:{RESET_STATE:function(e){Object.assign(e,De())},ADD_MESSAGE:function(e,t){var n=t.title,r=t.text,a=t.type;e.messages.push({title:n,text:r,type:a}),q.logger.debug("ADD_MESSAGE ".concat(n," ").concat(r," ").concat(a))},REMOVE_OLDEST_MESSAGE:function(e){var t=e.shift();q.logger.debug("REMOVE OLDEST MESSAGE: ".concat(t.title," ").concat(t.text," ").concat(t.type))},CLEAR_MESSAGES:function(e){e.messages=[],q.logger.debug("CLEAR MESSAGES")}}};function Le(){return{types:[]}}var $e={namespaced:!0,state:Le(),getters:{types:function(e){var t={},n=!0,r=!1,a=void 0;try{for(var o,i=e.types[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t[c["type"]]=c}}catch(s){r=!0,a=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}},actions:{LOAD_TYPE:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,o,i,c,s,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a=t.state,o=n.url,i=n.type,c=n.force,s=void 0!==c&&c,o="".concat(o,"/@types/").concat(i),s||!a.types[i]){e.next=6;break}return q.logger.debug("LOAD_TYPE - using cache: ".concat(i)),e.abrupt("return");case 6:return e.prev=6,q.logger.debug("LOAD_TYPE: ".concat(i,", ").concat(o)),e.next=10,ye.a.get(o);case 10:l=e.sent,r("ADD_TYPE",{type:i,schema:l.data}),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](6),q.logger.error("Error while LOAD_TYPE ".concat(o)),q.logger.error(e.t0);case 18:case"end":return e.stop()}},e,null,[[6,14]])}));function t(t,n){return e.apply(this,arguments)}return t}(),RESET_STATE:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("RESET_STATE");case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},mutations:{RESET_STATE:function(e){Object.assign(e,Le())},ADD_TYPE:function(e,t){var n=t.type,r=t.schema;e.types.push({type:n,schema:r,_loaded:new Date}),q.logger.debug("ADD_TYPE ".concat(n))}}};function Ue(){return{users:{"@id":"",items:[]}}}var Ie={namespaced:!0,state:Ue(),actions:{LOAD_USERS:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,o,i,c,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a=t.state,o=n.force,i=void 0!==o&&o,i||!a.users.items.length){e.next=5;break}return q.logger.debug("LOAD_USERS - use cache"),e.abrupt("return");case 5:return c="".concat(l.baseURI,"/@vocabularies/plone.app.vocabularies.Users"),e.prev=6,q.logger.debug("LOAD_USERS: ".concat(c)),e.next=10,ye.a.get(c);case 10:return s=e.sent,r("ADD_USERS",{users:s.data}),e.abrupt("return",s.data);case 15:e.prev=15,e.t0=e["catch"](6),q.logger.error("Error while LOAD_USERS"),q.logger.error(e.t0);case 19:case"end":return e.stop()}},e,null,[[6,15]])}));function t(t,n){return e.apply(this,arguments)}return t}(),LOAD_ALLOWED_USERS:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.state,r=n.url,r="".concat(r,"/@vocabularies/empower.allowed_users"),e.prev=3,q.logger.debug("LOAD_ALLOWED_USERS: ".concat(r)),e.next=7,ye.a.get(r);case 7:return a=e.sent,e.abrupt("return",a.data);case 11:e.prev=11,e.t0=e["catch"](3),q.logger.error("Error while LOAD_ALLOWED_USERS"),q.logger.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[3,11]])}));function t(t,n){return e.apply(this,arguments)}return t}(),RESET_STATE:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("RESET_STATE");case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},mutations:{RESET_STATE:function(e){Object.assign(e,Ue())},ADD_USERS:function(e,t){var n=t.users;u["a"].set(e,"users",n),q.logger.debug("ADD_USERS")}}},Ne={namespaced:!0,state:{specification:{case:{title:"Case",next:["analysis"]},analysis:{title:"Analysis",next:["strategy"]},strategy:{title:"Strategy",next:["action"]},action:{title:"Action",next:["evaluation"]},evaluation:{title:"Evaluation",next:["strategy","action"]}}}};u["a"].use(h["a"]);var Me=new h["a"].Store({modules:{app:Oe,login:Ae,context:Re,portal_message:Pe,types:$e,users:Ie,workspace:Ne}});function qe(){ye.a.defaults.headers.common["Accept"]="application/json",ye.a.interceptors.request.use(function(e){var t=Me.state.login.auth_token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){return Promise.reject(e)})}u["a"].use(function(e){e.prototype.$bubble=function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];do{var o;(o=t).$emit.apply(o,[e].concat(r)),t=t.$parent}while(t)}});var Ve=n("a925");u["a"].use(Ve["a"]);var Fe={en:{contribution:{add_answer:"Add answer",add_workspace:"Add {ws}"},login:{title:"Login",username:"User name",username_placeholder:"name@example.org",password:"Password"},workspace:{case:"Case",analysis:"Analysis",strategy:"Strategy",action:"Action",evaluation:"Evaluation"},buttons:{delete_title:"Delete {type}",delete_ok:"Delete now",delete_cancel:"Cancel",delete_text:"Do you really want to delete {title}?"}},de:{contribution:{add_answer:"Antworten",add_workspace:"{ws} anlegen"},login:{title:"Anmelden",username:"Benutzername",username_placeholder:"name@beispiel.at",password:"Passwort"},workspace:{case:"Fall",analysis:"Analyse",strategy:"Strategie",action:"Aktion",evaluation:"Evaluierung"},buttons:{delete_title:"{type} löschen",delete_ok:"Jetzt löschen",delete_cancel:"Abbrechen",delete_text:"Möchten sie wirklich {title} löschen?"}}},We=new Ve["a"]({locale:"de",messages:Fe}),Be=n("8c4f"),Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"view",class:[e.component]},[e.context?n(e.component,{tag:"component",attrs:{context:e.context}}):e._e()],1)},He=[],Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.localcontext?n("div",{staticClass:"viewWrapper"},[n("section",{staticClass:"em-cases-overview"},e._l(e.cases,function(e){return n("ContributionSmall",{key:e.UID,attrs:{item:e}})}),1),n("AddButton",{directives:[{name:"can",rawName:"v-can:add_case",value:e.context,expression:"context",arg:"add_case"}],attrs:{parent:e.context,content_type:"Case",workspace:"case"},on:{save:function(){return e.load({force:!0})}}})],1):e._e()},ze=[],Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"em-buttonwrapper"},[e._t("default"),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"blue",title:"Add "+e.context["@type"]},on:{click:e.open}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_add))])],1),e.active?n("ModalWrapper",[n(e.component,{tag:"component",attrs:{context:e.context,parent:e.parent},on:{save:e.close,cancel:e.close}})],1):e._e()],2)},Je=[],Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.save(t)}}},[n("v-card",[n("v-card-title",[e._v(e._s(e.title))]),n("v-card-text",[n("TextLine",{attrs:{label:"Title",edit:!0},model:{value:e.context.title,callback:function(t){e.$set(e.context,"title",t)},expression:"context.title"}}),n("TextArea",{attrs:{label:"Description",edit:!0},model:{value:e.context.description,callback:function(t){e.$set(e.context,"description",t)},expression:"context.description"}}),n("TextEditor",{attrs:{label:"Text",edit:!0},model:{value:e.context.text,callback:function(t){e.$set(e.context,"text",t)},expression:"context.text"}}),n("Autocomplete",{attrs:{label:"Klient*in",edit:!0,multiple:!0,loader:"users/LOAD_USERS"},model:{value:e.context.client,callback:function(t){e.$set(e.context,"client",t)},expression:"context.client"}}),n("Autocomplete",{attrs:{label:"Koordinator*in",edit:!0,multiple:!0,loader:"users/LOAD_USERS"},model:{value:e.context.coordinators,callback:function(t){e.$set(e.context,"coordinators",t)},expression:"context.coordinators"}}),n("Autocomplete",{attrs:{label:"Expert*innen Pool",edit:!0,multiple:!0,loader:"users/LOAD_USERS"},model:{value:e.context.expert_pool,callback:function(t){e.$set(e.context,"expert_pool",t)},expression:"context.expert_pool"}}),n("FileUpload",{ref:"fileupload",attrs:{context:e.context,label:"Files",edit:!0,multiple:!0,store_save:"context/SAVE_FILES",store_load:"context/LOAD_FILES",store_delete:"context/DELETE_FILE"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"red",title:"Cancel"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_cancel))])],1),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"green",title:"Save",type:"submit"},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_save))])],1)],1)],1)],1)},Qe=[],Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.edit?n("v-autocomplete",{attrs:{items:e.items_,label:e.label,multiple:e.multiple,"menu-props":{closeOnContentClick:!0},chips:"","deletable-chips":"",dense:""},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}):e._e(),!e.edit&&e.value?n("span",[e._v(e._s(e.value))]):e._e()],1)},et=[],tt={props:{value:{type:[String,Array],required:!0},edit:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""},multiple:{type:Boolean,required:!1,default:!1},items:{type:Array,required:!1,default:null},loader:{type:String,required:!1,default:null},loader_context:{type:Object,required:!1}},data:function(){return{items_:null}},computed:{_value:{get:function(){var e=this.multiple?[]:"";return this.value?this.value:e},set:function(e){this.$emit("input",e)}}},methods:{load:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={},this.loader_context&&(t.url=this.loader_context["@id"]),e.next=4,this.$store.dispatch(this.loader,t);case 4:n=e.sent,this.items_=q.items_from_vocab(n);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.items?this.items_=this.items:this.load()}},nt=tt,rt=Object(O["a"])(nt,Ze,et,!1,null,null,null),at=rt.exports,ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filedrop",class:{active:e.active},on:{dragenter:function(t){return t.stopPropagation(),t.preventDefault(),e.handle_drag(t)},dragover:function(t){return t.stopPropagation(),t.preventDefault(),e.handle_drag(t)},dragleave:function(t){return t.stopPropagation(),t.preventDefault(),e.handle_leave(t)},drop:function(t){return t.stopPropagation(),t.preventDefault(),e.handle_drop(t)}}},[n("p",[e._v("Upload multiple files with the file dialog or by dragging and dropping images onto the dashed region")]),n("input",{attrs:{type:"file",multiple:""},on:{change:e.handle_input}}),n("label",[e._v("Select some files")]),e.files.length?n("div",{staticClass:"filedrop-previews"},[n("strong",[e._v("Files to upload")]),e._l(e.files,function(t,r){return n("div",{key:"preview_"+r,staticClass:"filedrop-preview"},[e.is_image(t.file)?n("img",{staticClass:"filedrop-preview-image",attrs:{src:t.src,title:"preview.name"}}):e._e(),e.is_image(t.file)?e._e():n("div",{staticClass:"filedrop-preview-file"},[e._v(e._s(t.file.name))]),n("v-btn",{staticClass:"filedrop-preview-delete",attrs:{fab:"",dark:"",small:"",color:"red",title:"Delete"},on:{click:function(n){return e.delete_file(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_close))])],1)],1)})],2):e._e(),e.existing_files.length?n("div",{staticClass:"filedrop-previews"},[n("strong",[e._v("Existing files")]),e._l(e.existing_files,function(t,r){return n("div",{key:"preview_existing_"+r,staticClass:"filedrop-preview"},[e.is_image(t.file)?n("a",{attrs:{href:t.src,target:"_blank"}},[n("img",{staticClass:"filedrop-preview-image",attrs:{src:t.src}})]):e._e(),e.is_image(t.file)?e._e():n("a",{staticClass:"filedrop-preview-file",attrs:{href:t.src,target:"_blank"}},[e._v(e._s(t.file.name))]),n("v-btn",{staticClass:"filedrop-preview-delete",attrs:{fab:"",dark:"",small:"",color:"red",title:"Delete"},on:{click:function(t){e.overlay=!0}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_close))])],1),n("v-overlay",{attrs:{absolute:!0,opacity:1,value:e.overlay}},[n("strong",[e._v("Really delete file from server?")]),n("v-btn",{attrs:{color:"orange lighten-2"},on:{click:function(n){return e.delete_file(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_close))])],1)],1)],1)})],2):e._e()])},it=[],ct=n("75fc"),st={props:{context:{type:Object,required:!0},edit:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""},multiple:{type:Boolean,required:!1,default:!1},store_save:{type:String,required:!1},store_load:{type:String,required:!1},store_delete:{type:String,required:!1}},data:function(){return{icon_close:M["e"],active:!1,files:[],existing_files:[],overlay:!1}},methods:{handle_drag:function(){this.active=!0},handle_leave:function(){this.active=!1},handle_drop:function(e){this.active=!1;var t=e.dataTransfer,n=t.files;this.add_files(n)},handle_input:function(e){this.add_files(e.target.files)},is_image:function(e){return"image"===q.image_or_file(e)},add_files:function(e){var t=this;e=Object(ct["a"])(e);var n=!0,r=!1,a=void 0;try{for(var o,i=function(){var e=o.value,n={file:e,src:null};if(t.files.push(n),t.is_image(e)){var r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){n.src=r.result}}},c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)i()}catch(s){r=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}},delete_file:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.overlay=!1,!(t.file instanceof File)){e.next=6;break}n=this.files.indexOf(t),n>-1&&this.files.splice(n,1),e.next=10;break;case 6:return e.next=8,this.$store.dispatch(this.store_delete,{url:t.src});case 8:r=this.existing_files.indexOf(t),r>-1&&this.existing_files.splice(r,1);case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),save_files:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:null,t=t||this.context["@id"],e.next=4,this.$store.dispatch(this.store_save,{url:t,files:this.files});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),get_files:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.store_load&&this.context["@id"]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.$store.dispatch(this.store_load,{url:this.context["@id"]});case 4:t=e.sent,this.existing_files=t.map(function(e){return{file:{name:e.title,type:e["@type"].toLowerCase()},src:e["@id"]}});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.get_files()}},lt=st,ut=(n("0cba"),Object(O["a"])(lt,ot,it,!1,null,null,null)),pt=ut.exports,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.edit?n("TextEditor",{attrs:{text:e._value,options:e.editor_options,"custom-tag":"div"},on:{edit:e.editor_edit}}):e._e(),!e.edit&&e._value?n("div",{domProps:{innerHTML:e._s(e._value)}}):e._e()],1)},ft=[],vt=(n("3e93"),n("75b0"),n("4884")),_t=n.n(vt),mt={components:{TextEditor:_t.a},props:{value:{type:Object,required:!0},edit:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""}},data:function(){return{editor_options:{toolbar:{buttons:["bold","italic","underline","anchor"]},anchor:{customClassOption:"alink",customClassOptionText:"Button",linkValidation:!1,targetCheckbox:!1,targetCheckboxText:"Open in new window"}}}},computed:{_value:{get:function(){return this.value?this.value.data:""},set:function(e){var t={"content-type":"text/html",data:e,encoding:"utf8"};this.$emit("input",t)}}},methods:{editor_edit:function(e){this._value=e.api.origElements.innerHTML}}},ht=mt,bt=Object(O["a"])(ht,dt,ft,!1,null,null,null),gt=bt.exports,xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.edit?n("v-text-field",{attrs:{label:e.label},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}):e._e(),!e.edit&&e.value?n("span",[e._v(e._s(e.value))]):e._e()],1)},wt=[],yt={props:{value:{type:String,required:!0},edit:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""}},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Et=yt,Ot=Object(O["a"])(Et,xt,wt,!1,null,null,null),kt=Ot.exports,Tt={components:{Autocomplete:at,FileUpload:pt,TextLine:kt,TextEditor:gt},props:{context:{type:Object,required:!0},parent:{type:Object,required:!1}},data:function(){return{mode_add:!this.context["@id"],icon_cancel:M["d"],icon_save:M["g"]}},computed:{title:function(){return"".concat(this.mode_add?"Add":"Edit"," ").concat(this.context["@type"])}},methods:{cancel:function(){this.$emit("cancel")},save:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.mode_add){e.next=6;break}return e.next=3,this.$store.dispatch("context/PATCH",{context:this.context});case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,this.$store.dispatch("context/POST",{parent_url:this.parent["@id"],context:this.context});case 8:t=e.sent;case 9:return e.next=11,this.$refs.fileupload.save_files(t["@id"]);case 11:this.$bubble("save");case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},St=Tt,jt=Object(O["a"])(St,Ke,Qe,!1,null,null,null),Rt=jt.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.save(t)}}},[n("v-card",[n("v-card-title",[e._v(e._s(e.title))]),n("v-card-text",[n("TextLine",{attrs:{label:"Title",edit:!0},model:{value:e.context.title,callback:function(t){e.$set(e.context,"title",t)},expression:"context.title"}}),n("TextEditor",{attrs:{label:"Text",edit:!0},model:{value:e.context.text,callback:function(t){e.$set(e.context,"text",t)},expression:"context.text"}}),n("Autocomplete",{attrs:{label:"Zugewiesene Expert*innen",edit:!0,multiple:!0,loader:"users/LOAD_ALLOWED_USERS",loader_context:e.parent||e.context.parent},model:{value:e.context.experts_assigned,callback:function(t){e.$set(e.context,"experts_assigned",t)},expression:"context.experts_assigned"}}),n("FileUpload",{ref:"fileupload",attrs:{context:e.context,label:"Files",edit:!0,multiple:!0,store_save:"context/SAVE_FILES",store_load:"context/LOAD_FILES",store_delete:"context/DELETE_FILE"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"red",title:"Cancel"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_cancel))])],1),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"green",title:"Save",type:"submit"},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_save))])],1)],1)],1)],1)},At=[],Dt={components:{Autocomplete:at,FileUpload:pt,TextLine:kt,TextEditor:gt},props:{context:{type:Object,required:!0},parent:{type:Object,required:!1}},data:function(){return{mode_add:!this.context["@id"],icon_cancel:M["d"],icon_save:M["g"]}},computed:{title:function(){return"".concat(this.mode_add?"Add":"Edit"," ").concat(this.context["@type"])}},methods:{cancel:function(){this.$emit("cancel")},save:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.mode_add){e.next=6;break}return e.next=3,this.$store.dispatch("context/PATCH",{context:this.context});case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,this.$store.dispatch("context/POST",{parent_url:this.parent["@id"],context:this.context});case 8:t=e.sent;case 9:return e.next=11,this.$refs.fileupload.save_files(t["@id"]);case 11:this.$bubble("save");case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},Pt=Dt,Lt=Object(O["a"])(Pt,Ct,At,!1,null,null,null),$t=Lt.exports,Ut={components:{CaseEdit:Rt,ContributionEdit:$t,ModalWrapper:ue},props:{parent:{type:Object,required:!0},content_type:{type:String,required:!1,default:null},workspace:{type:String,required:!1,default:null}},data:function(){return{active:!1,context:null,icon_add:M["k"]}},computed:{_content_type:function(){return this.content_type?this.content_type:this.parent["@type"]},component:function(){return"".concat(this._content_type,"Edit")}},methods:{set_context:function(){var e=this.workspace?this.workspace:this.parent.workspace,t=new(l["".concat(this._content_type,"Model")])({workspace:e});this.context=t},open:function(){this.set_context(),this.active=!0},close:function(){this.active=!1}},created:function(){this.set_context()}},It=Ut,Nt=Object(O["a"])(It,Ye,Je,!1,null,null,null),Mt=Nt.exports,qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"em-contribution em-contribution--mode_small relative",class:["em-contribution-"+e.item.workspace,"uid-"+e.item.UID,"state-"+(e.item.review_state||"private"),e.item.workspace_root?"em-workspace-root":null]},[n("header",{staticClass:"em-contribution-header"},[n("h3",{staticClass:"em-contribution-title"},[n("router-link",{attrs:{to:{path:e.makePath(e.item["@id"])}}},[e._v("\n        "+e._s(e.item.title)+"\n      ")])],1),e.item.created?n("div",{staticClass:"em-date"},[n("strong",[e._v("Erstellt:")]),n("time",{attrs:{datetime:e.item.created}},[e._v(e._s(e._f("format_date")(e.item.created)))])]):e._e(),e.item.modified?n("div",{staticClass:"em-date"},[n("strong",[e._v("Verändert:")]),n("time",{attrs:{datetime:e.item.modified}},[e._v(e._s(e._f("format_date")(e.item.modified)))])]):e._e()])])},Vt=[],Ft={props:{item:{type:Object,required:!0}},methods:{makePath:function(e){return q.makePath(e)}}},Wt=Ft,Bt=Object(O["a"])(Wt,qt,Vt,!1,null,null,null),Gt=Bt.exports,Ht={components:{AddButton:Mt,ContributionSmall:Gt},props:{context:{type:Object,required:!0}},data:function(){return{localcontext:null}},computed:{cases:function(){return this.localcontext.items.filter(function(e){return"Case"===e["@type"]})}},methods:{load:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],this.localcontext=this.context,!t){e.next=6;break}return e.next=5,this.$store.dispatch("context/LOAD_CONTEXT",{url:this.context["@id"],force:t});case 5:this.localcontext=e.sent;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.load()},watch:{context:"load"}},Xt=Ht,zt=Object(O["a"])(Xt,Xe,ze,!1,null,null,null),Yt=zt.exports,Jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"viewWrapper"},[n("WorkspaceTabs"),n("Workspace",{attrs:{context:e.context,workspace:"case"}})],1)},Kt=[],Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.items?n("section",{staticClass:"em-workspace-overview",class:"em-workspace-"+e.workspace},e._l(e.items,function(t){return n("div",{key:"thread-"+e.workspace+"-"+t["@id"],staticClass:"em-workspace--group"},[n("section",{staticClass:"em-workspace--previous-item"},[t.previous_workspace?n("ContributionSmaller",{attrs:{item:t.previous_workspace}}):e._e()],1),n("section",{staticClass:"em-workspace--item"},[n("ContributionSmall",{attrs:{item:t}})],1),t.next_workspaces?n("section",{staticClass:"em-workspace--next-items"},e._l(t.next_workspaces,function(e,t){return n("ContributionSmaller",{key:t,attrs:{item:e}})}),1):e._e()])}),0):e._e()},Zt=[],en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"em-contribution em-contribution--mode_smaller relative",class:["em-contribution-"+e.item.workspace,"uid-"+e.item.UID,"state-"+(e.item.review_state||"private"),e.item.workspace_root?"em-workspace-root":null]},[n("header",{staticClass:"em-contribution-header"},[n("p",{staticClass:"em-contribution-title"},[n("router-link",{attrs:{to:{path:e.makePath(e.item["@id"])}}},[e._v("\n        "+e._s(e.item.title)+"\n      ")])],1)])])},tn=[],nn={props:{item:{type:Object,required:!0}},methods:{makePath:function(e){return q.makePath(e)}}},rn=nn,an=Object(O["a"])(rn,en,tn,!1,null,null,null),on=an.exports,cn={components:{ContributionSmall:Gt,ContributionSmaller:on},props:{context:{type:Object,required:!0},workspace:{type:String,required:!0}},data:function(){return{items:[]}},methods:{load:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.context["@components"]["workspace_overview"]["@id"],e.prev=1,q.logger.debug("load workspace items: ".concat(t,", workspace ").concat(this.workspace)),e.next=5,ye.a.get(t,{params:{workspace:this.workspace}});case 5:n=e.sent,this.items=n.data.items,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),q.logger.error("Error while loading workspace items at: ".concat(t)),q.logger.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.load()},watch:{context:"load"}},sn=cn,ln=Object(O["a"])(sn,Qt,Zt,!1,null,null,null),un=ln.exports,pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"em-workspace-tabs",class:"em-workspace-tabs-"+e.current_workspace},e._l(e.workspaces,function(t){return n("a",{key:"workspace-tab-"+t.id,staticClass:"em-btn",class:["em-btn-"+t.id,{active:e.current_workspace==t.id}],attrs:{href:e.base_url+"/"+t.id}},[e._v(e._s(t.title))])}),0)},dn=[];function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _n={computed:vn({current_workspace:function(){return this.$route.params.workspace||this.current_context.workspace},base_url:function(){return"".concat(q.makePath(this.current_case["@id"]),"/+ws")},workspaces:function(){return[{id:"case",title:"Fall"},{id:"analysis",title:"Analyse"},{id:"strategy",title:"Strategie"},{id:"action",title:"Aktion"},{id:"evaluation",title:"Evaluierung"}]}},Object(h["b"])({current_case:function(e){return e.context.current_case},current_context:function(e){return e.context.current_context}}))},mn=_n,hn=Object(O["a"])(mn,pn,dn,!1,null,null,null),bn=hn.exports,gn={components:{Workspace:un,WorkspaceTabs:bn},props:{context:{type:Object,required:!0}}},xn=gn,wn=Object(O["a"])(xn,Jt,Kt,!1,null,null,null),yn=wn.exports,En=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"viewWrapper"},[n("WorkspaceTabs"),n("section",{staticClass:"em-workspace",class:"em-workspace-"+e.context.workspace},[n("Thread",{attrs:{item:e.context}})],1)],1)},On=[],kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.context?n("div",{staticClass:"article_wrapper",class:e.context.workspace_root?"em-workspace-root":null},[n("Contribution",{attrs:{context:e.context},on:{save:function(){return e.load({force:!0})},delete:function(){return e.load({force:!0})}}}),e._l(e.next_ws_items,function(e){return n("ContributionSmall",{key:e.UID,attrs:{item:e}})}),e._l(e.thread_items,function(e){return n("Thread",{key:e.UID,attrs:{item:e}})})],2):e._e()},Tn=[],Sn=n("760e"),jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"em-contribution em-contribution--mode_normal",class:["em-contribution-"+e.context.workspace,"uid-"+e.context.UID,"state-"+e.context.review_state,e.context.workspace_root?"em-workspace-root":null]},[n("header",{staticClass:"em-contribution-header"},[e.available_field("creators")?n("div",e._l(e.context.creators||[],function(e,t){return n("AccountIcon",{key:t,attrs:{account:e,role:"Autor*in"}})}),1):e._e(),n("h3",{staticClass:"em-contribution-title"},[e.available_field("title")?n("TextLine",{model:{value:e.context.title,callback:function(t){e.$set(e.context,"title",t)},expression:"context.title"}}):e._e()],1),e.available_field("client")?n("div",[e._v("\n      Kient*in\n      "),e._l(e.context.client||[],function(e,t){return n("AccountIcon",{key:t,attrs:{account:e,role:"Klient*in"}})})],2):e._e(),e.available_field("created")?n("div",{staticClass:"em-date"},[n("strong",[e._v("Erstellt:")]),n("time",{attrs:{datetime:e.context.created}},[e._v(e._s(e._f("format_date")(e.context.created)))])]):e._e(),e.available_field("modified")?n("div",{staticClass:"em-date"},[n("strong",[e._v("Verändert:")]),n("time",{attrs:{datetime:e.context.modified}},[e._v(e._s(e._f("format_date")(e.context.modified)))])]):e._e()]),n("div",{staticClass:"em-contribution-body"},[e.available_field("description")?n("TextArea",{model:{value:e.context.description,callback:function(t){e.$set(e.context,"description",t)},expression:"context.description"}}):e._e(),e.available_field("text")?n("TextEditor",{model:{value:e.context.text,callback:function(t){e.$set(e.context,"text",t)},expression:"context.text"}}):e._e()],1),e.files?n("div",{staticClass:"em-contribution-sidebar"},[n("ul",e._l(e.files,function(t){return n("li",{key:"file-"+t.UID},[n("a",{attrs:{href:t["@id"],target:"_blank"}},[e._v(e._s(t.title))])])}),0)]):e._e(),n("footer",{staticClass:"em-contribution-footer"},[n("div",{staticClass:"em-contribution-meta"},[e.available_field("coordinators")?n("div",[e._v("\n        Koordinator*in\n        "),e._l(e.context.coordinators||[],function(e,t){return n("AccountIcon",{key:t,attrs:{account:e,role:"Koordinator*in"}})})],2):e._e(),e.available_field("expert_pool")?n("div",[e._v("\n        Expert*innen Pool:\n        "),e._l(e.context.expert_pool||[],function(e,t){return n("AccountIcon",{key:t,attrs:{account:e,role:"Expert*in"}})})],2):e._e(),e.available_field("experts_assigned")?n("div",[e._v("\n        Leseberechtigung\n        "),e._l(e.context.experts_assigned||[],function(e,t){return n("AccountIcon",{key:t,attrs:{account:e,role:"Account"}})})],2):e._e()]),e.context?n("div",{staticClass:"em-editarea"},[e.context.workspace?n("div",[n("strong",[e._v("Workspace:")]),n("span",[e._v(e._s(e.context.workspace))])]):e._e(),n("div",[n("strong",[e._v("URL:")]),n("router-link",{attrs:{to:{path:e.makePath(e.context["@id"])}}},[e._v(e._s(e.context.title))])],1),e._e()]):e._e(),e.editable?n("div",{staticClass:"em-actions"},[n("EditButton",{directives:[{name:"can",rawName:"v-can:modify",value:e.context,expression:"context",arg:"modify"}],attrs:{context:e.context}}),n("DeleteButton",{directives:[{name:"can",rawName:"v-can:delete",value:e.context,expression:"context",arg:"delete"}],attrs:{context:e.context}}),n("AddButton",{directives:[{name:"can",rawName:"v-can:add_contribution",value:e.context,expression:"context",arg:"add_contribution"}],attrs:{parent:e.context,content_type:"Contribution"}},[e._v(e._s(e.$t("contribution.add_answer")))]),e._l(e.next_ws,function(t){return n("AddButton",{directives:[{name:"can",rawName:"v-can:add_contribution",value:e.context,expression:"context",arg:"add_contribution"}],key:"add-"+t,attrs:{parent:e.context,content_type:"Contribution",workspace:t}},[e._v(e._s(e.$t("contribution.add_workspace",{ws:e.$t("workspace."+t)})))])})],2):e._e()])])},Rn=[],Cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-icon",{staticClass:"em-person",attrs:{dark:"",title:e.role+" "+e.account}},[e._v("\n  "+e._s(e.icon_account)+"\n")])},An=[],Dn={props:{account:{type:String,required:!0},role:{type:String,required:!0}},data:function(){return{icon_account:M["a"]}}},Pn=Dn,Ln=Object(O["a"])(Pn,Cn,An,!1,null,null,null),$n=Ln.exports,Un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"em-buttonwrapper"},[e._t("default"),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"cyan",title:"Edit "+e.context["@type"]},on:{click:e.open}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_edit))])],1),e.active?n("ModalWrapper",[n(e.component,{tag:"component",attrs:{context:e.context},on:{save:e.close,cancel:e.close}})],1):e._e()],2)},In=[],Nn={components:{CaseEdit:Rt,ContributionEdit:$t,ModalWrapper:ue},props:{context:{type:Object,required:!0}},data:function(){return{active:!1,icon_edit:M["j"]}},computed:{component:function(){return"".concat(this.context["@type"],"Edit")}},methods:{open:function(){this.active=!0},close:function(){this.active=!1}}},Mn=Nn,qn=Object(O["a"])(Mn,Un,In,!1,null,null,null),Vn=qn.exports,Fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"em-buttonwrapper"},[e._t("default"),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"red",title:"Delete "+e.context["@type"]},on:{click:e.open}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_delete))])],1),e.active?n("ModalWrapper",[n("div",[n("v-card",[n("v-card-title",[e._v(e._s(e.$t("buttons.delete_title",{type:e.context["@type"]})))]),n("v-card-text",[e._v(e._s(e.$t("buttons.delete_text",{title:e.context.title})))]),n("v-card-actions",[n("v-spacer"),n("v-btn",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{fab:"",dark:"",small:"",color:"green",title:"Cancel"},on:{click:function(t){return t.stopPropagation(),e.close(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_cancel))])],1),n("v-btn",{attrs:{fab:"",dark:"",small:"",color:"red",title:"Delete"},on:{click:function(t){return t.stopPropagation(),e.delete_item(t)}}},[n("v-icon",{attrs:{dark:""}},[e._v(e._s(e.icon_delete))])],1)],1)],1)],1)]):e._e()],2)},Wn=[],Bn={components:{ModalWrapper:ue},props:{context:{type:Object,required:!0}},data:function(){return{active:!1,icon_cancel:M["d"],icon_delete:M["l"]}},computed:{component:function(){return"".concat(this.context["@type"],"Edit")}},methods:{open:function(){this.active=!0},close:function(){this.active=!1},delete_item:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("context/DELETE",{context:this.context});case 2:this.active=!1,this.$bubble("delete");case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},Gn=Bn,Hn=Object(O["a"])(Gn,Fn,Wn,!1,null,null,null),Xn=Hn.exports,zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.edit?n("v-textarea",{attrs:{label:e.label},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}):e._e(),!e.edit&&e.value?n("div",{domProps:{innerHTML:e._s(e.value)}}):e._e()],1)},Yn=[],Jn={props:{value:{type:String,required:!0},edit:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""}},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Kn=Jn,Qn=Object(O["a"])(Kn,zn,Yn,!1,null,null,null),Zn=Qn.exports,er={components:{AccountIcon:$n,AddButton:Mt,EditButton:Vn,DeleteButton:Xn,TextLine:kt,TextArea:Zn,TextEditor:gt},props:{context:{type:Object,required:!0}},computed:{editable:function(){return this.context.can_edit},next_ws:function(){var e=this.$store.state.workspace.specification;return e[this.context.workspace].next},files:function(){return this.context.items.filter(function(e){return q.is_inline_type(e)})}},methods:{available_field:function(e){return this.context.hasOwnProperty(e)},makePath:function(e){return q.makePath(e)}}},tr=er,nr=Object(O["a"])(tr,jn,Rn,!1,null,null,null),rr=nr.exports,ar={name:"Thread",components:{Intersect:Sn["a"],Contribution:rr,ContributionSmall:Gt,Thread:cr},props:{item:{type:Object,required:!1}},data:function(){return{context:null}},computed:{next_ws_items:function(){var e=this.context.workspace;return this.context.items.filter(function(t){return t.workspace!==e&&!q.is_inline_type(t)})},thread_items:function(){var e=this.context.workspace;return this.context.items.filter(function(t){return t.workspace===e&&!q.is_inline_type(t)})}},methods:{load:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.$store.dispatch("context/LOAD_CONTEXT",{url:this.item["@id"],force:t});case 3:this.context=e.sent;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.load()},watch:{item:"load"}},or=ar,ir=(n("9af0"),Object(O["a"])(or,kn,Tn,!1,null,null,null)),cr=ir.exports,sr={components:{Thread:cr,WorkspaceTabs:bn},props:{context:{type:Object,required:!0}}},lr=sr,ur=Object(O["a"])(lr,En,On,!1,null,null,null),pr=ur.exports,dr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"viewWrapper"},[n("h1",[e._v(e._s(e.context.title))])])},fr=[],vr={props:{context:{type:Object,required:!0}}},_r=vr,mr=Object(O["a"])(_r,dr,fr,!1,null,null,null),hr=mr.exports;function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var xr={components:{CasesView:Yt,CaseView:yn,ContributionView:pr,DefaultView:hr},computed:gr({component:function(){if(this.context){var e=this.context["@type"];"Case"===e&&(e="Contribution"),-1===Object.keys(this.$options.components).indexOf(e+"View")&&(e="Default");var t=e+"View";return q.logger.debug("Using view ".concat(t)),t}}},Object(h["b"])({context:function(e){return e.context.current_context}}))},wr=xr,yr=Object(O["a"])(wr,Ge,He,!1,null,null,null),Er=yr.exports,Or=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.context["@id"]?n("div",{staticClass:"viewWrapper"},[n("WorkspaceTabs"),n("Workspace",{attrs:{context:e.context,workspace:e.workspace}})],1):e._e()},kr=[];function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(n,!0).forEach(function(t){Object(m["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var jr={components:{Workspace:un,WorkspaceTabs:bn},computed:Sr({workspace:function(){return this.$route.params.workspace}},Object(h["b"])({context:function(e){return e.context.current_context}}))},Rr=jr,Cr=Object(O["a"])(Rr,Or,kr,!1,null,null,null),Ar=Cr.exports;u["a"].use(Be["a"]);var Dr=new Be["a"]({mode:"history",routes:[{path:"**/+ws/:workspace",name:"ws-view",component:Ar},{path:"**",name:"view-factory",component:Er}]}),Pr=n("7496"),Lr=n("c6a6"),$r=n("8336"),Ur=n("b0af"),Ir=n("99d9"),Nr=n("a75b"),Mr=n("169a"),qr=n("ce7e"),Vr=n("4bd4"),Fr=n("132d"),Wr=n("a722"),Br=n("8860"),Gr=n("da13"),Hr=n("1800"),Xr=n("5d23"),zr=n("f774"),Yr=n("a797"),Jr=n("2fa4"),Kr=n("8654"),Qr=n("a844"),Zr=n("f309"),ea={components:{VApp:Pr["a"],VAutocomplete:Lr["a"],VBtn:$r["a"],VCard:Ur["a"],VCardActions:Ir["a"],VCardText:Ir["b"],VCardTitle:Ir["c"],VContent:Nr["a"],VDialog:Mr["a"],VDivider:qr["a"],VForm:Vr["a"],VIcon:Fr["a"],VLayout:Wr["a"],VList:Br["a"],VListItem:Gr["a"],VListItemAction:Hr["a"],VListItemContent:Xr["a"],VListItemTitle:Xr["b"],VNavigationDrawer:zr["a"],VOverlay:Yr["a"],VSpacer:Jr["a"],VTextField:Kr["a"],VTextarea:Qr["a"]},icons:{iconfont:"mdiSvg"}};u["a"].use(Zr["a"],ea);var ta=new Zr["a"];qe(),u["a"].config.productionTip=!l.DEVELOPMENT,u["a"].config.silent=!l.DEVELOPMENT,u["a"].filter("format_date",function(e){if(!e)return"";var t=new Date(e),n="".concat(q.zeropad(t.getDate()),".").concat(q.zeropad(t.getMonth()+1),".").concat(t.getFullYear()),r="".concat(q.zeropad(t.getHours()),":").concat(q.zeropad(t.getMinutes()));return"".concat(n,", ").concat(r)}),new u["a"]({bubble:void 0,i18n:We,router:Dr,store:Me,vuetify:ta,render:function(e){return e(xe)}}).$mount("#app")},"927c":function(e,t,n){},"9af0":function(e,t,n){"use strict";var r=n("0906"),a=n.n(r);a.a},cb8d:function(e,t,n){}});
//# sourceMappingURL=app.bf49aa3a.js.map